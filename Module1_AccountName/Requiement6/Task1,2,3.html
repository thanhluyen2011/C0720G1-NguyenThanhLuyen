<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>bai-tap</title>
</head>
<body>
<script>
    class Customer{
        constructor(name,identityCard,dateOfBirth,email,address,customer,discount,
                    quantityIncluded,numberOfRentalDays,typeOfService,typeOfRoomToRent) {
            this.name = name;
            this.identityCard = identityCard;
            this.dateOfBirth = dateOfBirth;
            this.email = email;
            this.address = address;
            this.customer = customer;
            this.discount = discount;
            this.quantityIncluded = quantityIncluded;
            this.numberOfRentalDays = numberOfRentalDays;
            this.typeOfService = typeOfService;
            this.typeOfRoomToRent = typeOfRoomToRent;
        }
        getName(){
            return this.name;
        }
        setName(name){
            this.name = name;
        }
        getIdentityCard(){
            return this.identityCard;
        }
        setIdentityCard(identityCard){
            this.identityCard = identityCard;
        }
        getDateOfBirth(){
            return this.dateOfBirth;
        }
        setDateOfBirth(dateOfBirth){
            this.dateOfBirth = dateOfBirth;
        }
        getEmail(){
            return this.email;
        }
        setEmail(email){
            this.email = email;
        }
        getAddress(){
            return this.address;
        }
        setAddress(address){
            this.address = address;
        }
        getCustomer(){
            return this.customer;
        }
        setCustomer(customer){
            this.customer = customer;
        }
        getDiscount(){
            return this.discount;
        }
        setDiscount(discount){
            this.discount = discount;
        }
        getQuantityIncluded(){
            return this.quantityIncluded;
        }
        setQuantityIncluded(quantityIncluded){
            this.quantityIncluded = quantityIncluded;
        }
        getNumberOfRentalDays(){
            return this.numberOfRentalDays;
        }
        setNumberOfRentalDays(numberOfRentalDays){
            this.numberOfRentalDays = numberOfRentalDays;
        }
        getTypeOfService(){
            return this.typeOfService;
        }
        setTypeOfService(typeOfService){
            this.typeOfService = typeOfService;
        }
        getTypeOfRoomToRent(){
            return this.typeOfRoomToRent;
        }
        setTypeOfRoomToRent(typeOfRoomToRent){
            this.typeOfRoomToRent = typeOfRoomToRent ;
        }
        checkoutRoom(){
            let money;
            if(this.typeOfService == "Villa"){
                money = 500 * this.numberOfRentalDays *(1 - this.discount /100);
                //
            }else if(this.typeOfService == "House"){
                money = 300 * this.numberOfRentalDays *(1 - this.discount /100);
            }else if(this.typeOfService == "Room"){
                money = 100 * this.numberOfRentalDays *(1 - this.discount /100);
            }else{
                alert("vui lòng nhập đúng loại dịch vụ");
            }
            return money;
        }
    }
    class Employee{
        constructor(ten,ngaySinh,cmnd,sdt,email,hocVan,viTri) {
            this.ten = ten;
            this.ngaySinh = ngaySinh;
            this.cmnd = cmnd;
            this.sdt = sdt;
            this.email = email;
            this.hocVan = hocVan;
            this.viTri = viTri;
        }
        getTen(){
            return this.ten;
        }
        setTen(ten){
            this.ten = ten;
        }
        getNgaySinh(){
            return this.ngaySinh;
        }
        setNgaySinh(ngaySinh){
            this.ngaySinh = ngaySinh;
        }
        getCmnd(){
            return this.cmnd;
        }
        setCmnd(cmnd){
            this.cmnd = cmnd;
        }
        getSdt(){
            return this.sdt;
        }
        setSdt(sdt){
            this.sdt = sdt;
        }
        getEmail(){
            return this.email;
        }
        setEmail(email){
            this.email = email;
        }
        getHocVan(){
            return this.hocVan;
        }
        setHocVan(hocVan){
            this.hocVan = hocVan;
        }
        getViTri(){
            return this.viTri;
        }
        setViTri(viTri){
            this.viTri = viTri;
        }
        salaryEmployee() {
            let salary = 0;
            if (this.viTri == "Manager") {
                salary = 500;// này trả về dối số
            } else if (this.viTri == "Sale") {
                salary = 300; // này trả về dối số
            } else if (this.viTri == "Marketing") {
                salary = 200;// này trả về dối số
            } else {
                alert("vui lòng nhập đúng vị trí");
            }
            return salary;
        }
    }
    let arrListCustomers = [];
    let arrEmployee = [];
    function displayMainMenu() {
        let input = parseInt(prompt("1.Add new customer " +
            "\n2.Display information customer " +
            "\n3.Display total pay of customer " +
            "\n4.Edit information customer " +
            "\n5.Delete customer " +
            "\n6.AddEmployee" +
            "\n7.Display information Employee" +
            "\n8.Exit"));
        switch (input) {
            case 1:
                addNewCustomer();
                break;
            case 2:
                displayCustomers();
                break;
            case 3:
                displayTotalPayOfCustomer();
                break;
            case 4:
                editCustomer();
                break;
            case 5:
                deleteCustomer();
                break;
            case 6 :
                addEmployee();
                break;
            case 7 :
                displayEmployee();
                break;
            case 8  :
                displayMainMenu();
                break;
            default:
                alert("Vui lòng nhập từ 1 - 8");
                break;
        }
    }
    function addEmployee() {
        let reGexEmail = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;
        let reGexDay = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
        let reGexNumber = /^\d{9}$/;
        let reGexPhone =  /^\d{10}$/;
        let check = false;
        let ten = prompt("Họ và tên");
        let ngaySinh;
        do {
            ngaySinh = prompt("Ngày tháng năm sinh:");
            if (reGexDay.test(ngaySinh)) {
                check = true;
            } else {
                alert("Vui lòng nhập đúng định dạng dd/mm/yyyy");
            }
        } while (!check);
        let cmnd;
        check = false;
        do {
            cmnd = prompt("CMND:");
            if (reGexNumber.test(cmnd)) {
                check = true;
            } else {
                alert("CMND gồm có 9 số");
            }
        } while (!check);
        //
        let sdt;
        check = false;
        do {
            sdt = prompt("Số điện thoại:");
            if (reGexPhone.test(sdt)) {
                check = true;
            } else {
                alert("số điện thoại không hợp lệ");
            }
        } while (!check);
        let email;
        check = false;
        do {
            emailEmployee = prompt("Email:");
            if (reGexEmail.test(emailEmployee)) {
                check = true;
            } else {
                alert("Email không hợp lệ vui lòng nhập lại");
            }
        } while (!check);
        let hocVan = prompt("Trình độ học vấn");
        let viTri = prompt("Ví trí làm việc");
        let newEmployee = new Employee(ten,ngaySinh,cmnd,sdt,email,hocVan,viTri);
        arrEmployee.push(newEmployee);
        alert("Bạn đã thêm thành công");
       // alert(arrEmployee);// đã nhập đc vào mảng
        displayMainMenu();

    }
    function displayEmployee() {
        let tempt = "";
        for (let i = 0; i < arrEmployee.length; i++) {
            tempt += i + ".Họ tên:" + arrEmployee[i].getTen() + "\n";
        }
        let displayEmployee = parseInt(prompt(tempt));
        alert("1.Họ tên: " + arrEmployee[displayEmployee].getTen() + "\n"
            + "2.Ngày tháng năm sinh: " + arrEmployee[displayEmployee].getNgaySinh() + "\n"
            + "3.Số CMND: " + arrEmployee[displayEmployee].getCmnd() + "\n"
            + "4.Số điện thoại: "  + arrEmployee[displayEmployee].getSdt() + "\n"
            + "5.Email: " + arrEmployee[displayEmployee].getEmail()  + "\n"
            + "6.Học vấn/Trình độ: " + arrEmployee[displayEmployee].getHocVan() + "\n"
            + "7.Ví trí làm việc: " + arrEmployee[displayEmployee].getViTri()+ "\n"
            +"8.Lương " + arrEmployee[displayEmployee].getViTri() + ":" + arrEmployee[displayEmployee].salaryEmployee() + "$") ;
        displayMainMenu();
    }
    function addNewCustomer() {
        let reGexEmail = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;
        let reGexDay = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
        let reGexNumber = /^\d{9}$/;
        let check = false;
        let name = prompt("Họ tên:");
        let identityCard;
        do {
            identityCard = prompt("CMND:");
            if (reGexNumber.test(identityCard)){
                check = true;
            } else {
                alert("Vui lòng nhập đúng định dạng 9 số");
            }
        } while (!check);
        let dateOfBirth;
        check = false;
        do {
            dateOfBirth = prompt("Ngày tháng năm sinh:");
            if (reGexDay.test(dateOfBirth)) {
                check = true;
            } else {
                alert("Vui lòng nhập đúng định dạng dd/mm/yyyy");
            }
        } while (!check);

        let email;
        check = false;
        do {
            email = prompt("Email:");
            if (reGexEmail.test(email)) {
                check = true;
            } else {
                alert("Email không hợp lệ vui lòng nhập lại");
            }
        } while (!check);
        let address = prompt("Địa chỉ:");
        let customer = prompt("Loại khách hàng:");
        let discount = prompt("Giảm giá:");
        let quantityIncluded = prompt("Số người đi kèm:");
        let numberOfRentalDays = prompt("Số ngày thuê:");
        let typeOfService = prompt("Loại dịch vụ:");
        let typeOfRoomToRent = prompt("Loại phòng thuê:");
        let newCustomers = new Customer(name,identityCard,dateOfBirth,email,address,customer,
            discount,quantityIncluded,numberOfRentalDays,typeOfService,typeOfRoomToRent);
        arrListCustomers.push(newCustomers);
        alert("bạn đã nhập thành công");
        displayMainMenu();
    }
    function displayCustomers() {
        let temp = "";
        for (let i = 0 ; i < arrListCustomers.length;i++){
            temp +=i+ ". Name :" + arrListCustomers[i].getName() + "\n";
        }
        let chooseDisplay = parseInt(prompt(temp));
        alert("1.Họ tên: " + arrListCustomers[chooseDisplay].getName() + "\n"
            + "2.Số CMND: " + arrListCustomers[chooseDisplay].getIdentityCard() + "\n"
            + "3.Ngày tháng năm sinh: " + arrListCustomers[chooseDisplay].getDateOfBirth() + "\n"
            + "4.Email: "  + arrListCustomers[chooseDisplay].getEmail() + "\n"
            + "5.Địa chỉ:" + arrListCustomers[chooseDisplay].getAddress()  + "\n"
            + "6.Loại khách hàng:" + arrListCustomers[chooseDisplay].getCustomer() + "\n"
            + "7.Giảm giá:" + arrListCustomers[chooseDisplay].getDiscount() + "\n"
            + "8.Số người đi kèm:" + arrListCustomers[chooseDisplay].getQuantityIncluded() + "\n"
            + "9.Số ngày thuê:" + arrListCustomers[chooseDisplay].getNumberOfRentalDays() + "\n"
            + "10.Loại dịch vụ:" + arrListCustomers[chooseDisplay].getTypeOfService() + "\n"
            + "11.Loại phòng thuê: " + arrListCustomers[chooseDisplay].getTypeOfRoomToRent()) ;
        displayMainMenu();
    }
    function displayTotalPayOfCustomer () {
        let temp = "";
        for (let i = 0 ; i < arrListCustomers.length;i++){
            temp +=i+ ". Name :" + arrListCustomers[i].getName() + "\n";
        }
        let chooseDisplay = parseInt(prompt(temp));
        let customer = arrListCustomers[chooseDisplay];
        customer.checkoutRoom();
        displayMainMenu();
    }
    function editCustomer () {
        let temp = "";
        for (let i = 0 ; i < arrListCustomers.length;i++){
            temp +=i + ". Name :" + arrListCustomers[i].getName() + "\n";
        }
        let chooseDisplay = parseInt(prompt(temp));
        let chooseEdit = parseInt(prompt("1.Họ tên: " + arrListCustomers[chooseDisplay].getName() + "\n"
            + "2.Số CMND: " + arrListCustomers[chooseDisplay].getIdentityCard() + "\n"
            + "3.Ngày tháng năm sinh: " + arrListCustomers[chooseDisplay].getDateOfBirth() + "\n"
            + "4.Email: "  + arrListCustomers[chooseDisplay].getEmail() + "\n"
            + "5.Địa chỉ:" + arrListCustomers[chooseDisplay].getAddress()  + "\n"
            + "6.Loại khách hàng:" + arrListCustomers[chooseDisplay].getCustomer() + "\n"
            + "7.Giảm giá:" + arrListCustomers[chooseDisplay].getDiscount() + "\n"
            + "8.Số người đi kèm:" + arrListCustomers[chooseDisplay].getQuantityIncluded() + "\n"
            + "9.Số ngày thuê:" + arrListCustomers[chooseDisplay].getNumberOfRentalDays() + "\n"
            + "10.Loại dịch vụ:" + arrListCustomers[chooseDisplay].getTypeOfService() + "\n"
            + "11.Loại phòng thuê: " + arrListCustomers[chooseDisplay].getTypeOfRoomToRent())) ;
        switch (chooseEdit) {
            case 1:
                arrListCustomers[chooseDisplay].setName(prompt("Họ tên:")) ;
                break;
            case 2:
                arrListCustomers[chooseDisplay].setIdentityCard(prompt("Số CMND:"));
                break;
            case 3:
                arrListCustomers[chooseDisplay].setDateOfBirth(prompt("Ngày tháng năm sinh:"));
                break;
            case 4:
                arrListCustomers[chooseDisplay].setEmail(prompt("Email:")) ;
                break;
            case 5:
                arrListCustomers[chooseDisplay].setAddress(prompt("Địa chỉ:")) ;
                break;
            case 6:
                arrListCustomers[chooseDisplay].setCustomer(prompt("Loại khách hàng:")) ;
                break;
            case 7:
                arrListCustomers[chooseDisplay].setDiscount(prompt("Giảm giá:"));
                break;
            case 8:
                arrListCustomers[chooseDisplay].setQuantityIncluded(prompt("Số người đi kèm:")) ;
                break;
            case 9:
                arrListCustomers[chooseDisplay].setNumberOfRentalDays(prompt("Số ngày thuê:"));
                break;
            case 10:
                arrListCustomers[chooseDisplay].setTypeOfService(prompt("Loại dịch vụ:"));
                break;
            case 11:
                arrListCustomers[chooseDisplay].setTypeOfRoomToRent(prompt("Loại phòng thuê:"));
                break;
            default:
                alert("vui lòng nhập từ 1-11");
                break;
        }
        editCustomer();
    }
    function deleteCustomer() {
        let temp = "";
        for (let i = 0 ; i < arrListCustomers.length;i++){
            temp +=i + ". Name :" + arrListCustomers[i].getName() + "\n";
        }
        let chooseDelete = parseInt(prompt(temp));
        let check = parseInt(prompt("Bạn có chắc muốn xóa." + "\n1.yes   2.no"));
        if(check == 1){
            arrListCustomers.splice(chooseDelete,1);
            alert("bạn đã xóa thành công");
        }else{
            alert("Thoát");
        }
        displayMainMenu();
    }
    displayMainMenu();
</script>
</body>
</html>